# 构造数据抽象

## 数据抽象引导
**数据抽象**讨论各种程序设计语言都提供的，将数据对象组合起来形成**复合数据**的方式。

复合数据是为了提升我们在设计程序时所位于的概念层次，提高设计的模块性，增强语言的表达能力。

这种将程序中处理数据对象的表示的部分，与处理数据对象的使用的部分相互隔离的技术非常具有一般性，形成了一种称为**数据抽象**的设计方法。

处理复合数据中的一个关键性思想是**闭包**的概念，也就是说，用于组合数据对象的粘合剂不但能用于组合基本的数据对象，同样也可以用于复合的数据对象。另一个关键性的思想是，复合数据对象能够成为以**混合与匹配**的方式组合程序模块的**方便接口**。

将这一过程的使用方式与该过程究竟如何通过更基本的过程实现的具体细节互相分离。针对复合数据的类似概念称为**数据抽象**。

## 层次性数据和闭包性质
**闭包性质**是指通过它组合起数据对象得到的结果本身还可以通过同样的操作再进行组合。`cons`具有闭包性质。有了闭包性质，就可以建立起数据的**层次性**结构，这种结构由一些部分组成，而其中的各个部分又是由它们的部分构成。

### 序列的表示
**序列**（pair）是一批数据对象的一种有序汇集。一种最直接的表示方式是用一个序对的链条表示出序列。每个序对的`car`部分对应于这个链中的条目，`cdr`则是链中下一个序对。最后一个序对的`cdr`用一个能分辨不是序对的值`nil`表示，标明序对链的结束。

#### 表操作
序对链（chain of pair）的实现类似于链表。也有取值`list-ref`，求长度`length`，附加`append`等一般数据结构都具有的过程。

可以使用一种**带点尾部记法**形式的`define`来定义一个可以取任意个数实际参数的过程。就像`list`，`+`，`-`这些一样。
#### 对表的映射
高阶过程`map`有一个过程参数和一个表参数，返回将这一过程应用于表中各个元素得到的结果形成的表。
#### 对树的映射
`map`是处理序列的一种强有力的抽象，与此类似，`map`与递归的结合也是处理树的一种强有力的抽象。
### 序列作为一种约定的接口
在设计处理复合数据的程序时，数据抽象能够让我们不受数据描述细节的影响，并且能让程序在处理不同的数据描述时保持灵活性。使用序列作为一种**约定的接口**，同样也是一种与数据结构有关的强有力的设计原理。

在处理**数值数据**的时候，**程序抽象**将某种通用的处理模式实现为一种高阶过程。如果想要在处理**复合数据**的时候也实现类似的**程序抽象**，则依赖于我们操纵数据结构的方式。
#### 序列操作
使用信号流模型将序列操作抽象为**枚举器（enumerate）**，**过滤器（filter）**，**映射（map）**，**累积器（accumulate）**几个过程。
